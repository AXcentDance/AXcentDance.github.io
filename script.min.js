console.log('AXcent Dance website initialized.');document.addEventListener('DOMContentLoaded',()=>{console.log('DOM fully loaded and parsed');const mobileMenuBtn=document.querySelector('.mobile-menu-btn');const navLinks=document.querySelector('.nav-links');if(mobileMenuBtn){mobileMenuBtn.addEventListener('click',()=>{navLinks.classList.toggle('active');mobileMenuBtn.classList.toggle('active');});}const dropBtns=document.querySelectorAll('.dropbtn');dropBtns.forEach(btn=>{btn.addEventListener('click',(e)=>{if(window.innerWidth < 900){e.preventDefault();const dropdown=btn.closest('.dropdown');dropdown.classList.toggle('active');}});});const header=document.querySelector('.main-header');window.addEventListener('scroll',()=>{if(window.scrollY > 50){header.classList.add('scrolled');}else{header.classList.remove('scrolled');}});const revealElements=document.querySelectorAll('.reveal');const revealObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('active');}});},{threshold: 0.1,rootMargin: "0px 0px-50px 0px"});revealElements.forEach(element=>{revealObserver.observe(element);});document.addEventListener('click',(e)=>{const valueItem=e.target.closest('.value-item');if(valueItem){console.log('Clicked value item:',valueItem);const isActive=valueItem.classList.contains('active');document.querySelectorAll('.value-item').forEach(item=>{item.classList.remove('active');});if(!isActive){valueItem.classList.add('active');console.log('Added active class to:',valueItem);}}});const currentPath=window.location.pathname;const cleanPath=currentPath.length > 1 && currentPath.endsWith('/')? currentPath.slice(0,-1): currentPath;let currentPage=cleanPath.split('/').pop()|| 'index.html';if(currentPage.endsWith('.html')){currentPage=currentPage.slice(0,-5);}if(currentPage==='index')currentPage='';document.querySelectorAll('.nav-links a').forEach(link=>{const linkHref=link.getAttribute('href');if(!linkHref)return;let cleanLink=linkHref.replace('./','');if(cleanLink.endsWith('.html'))cleanLink=cleanLink.slice(0,-5);if(cleanLink==='index' || cleanLink==='')cleanLink='';const isActive=cleanLink===currentPage;if(isActive){link.classList.add('active');}});});const filterBtns=document.querySelectorAll('.filter-btn');const blogCards=document.querySelectorAll('.modern-card');if(filterBtns.length > 0 && blogCards.length > 0){filterBtns.forEach(btn=>{btn.addEventListener('click',()=>{filterBtns.forEach(b=> b.classList.remove('active'));btn.classList.add('active');const filterValue=btn.getAttribute('data-filter');blogCards.forEach(card=>{const cardCategory=card.getAttribute('data-category');if(filterValue==='all' || filterValue===cardCategory){card.style.display='flex';setTimeout(()=> card.style.opacity='1',10);}else{card.style.display='none';card.style.opacity='0';}});});});}document.addEventListener('DOMContentLoaded',()=>{let lastScrollY=window.scrollY;const mainHeader=document.querySelector('.main-header');if(mainHeader){window.addEventListener('scroll',()=>{const currentScrollY=window.scrollY;if(currentScrollY > 100){if(currentScrollY > lastScrollY){mainHeader.classList.add('header-hidden');}else{mainHeader.classList.remove('header-hidden');}}else{mainHeader.classList.remove('header-hidden');}lastScrollY=currentScrollY;});}if(document.body.style.paddingBottom==='60px'){document.body.style.paddingBottom='';}const scrollIndicator=document.querySelector('.scroll-indicator');const reviewsGrid=document.querySelector('.reviews-grid');if(scrollIndicator && reviewsGrid){scrollIndicator.addEventListener('click',()=>{reviewsGrid.scrollBy({left: 300,behavior: 'smooth'});});}});document.addEventListener('DOMContentLoaded',()=>{const trialForm=document.getElementById('trialForm');if(trialForm){console.log('Trial form found,attaching listener');trialForm.addEventListener('submit',e=>{e.preventDefault();const submitBtn=document.getElementById('submitTrialBtn');const originalBtnContent=submitBtn.innerHTML;submitBtn.innerHTML='<span>Submitting...</span>';submitBtn.disabled=true;submitBtn.style.opacity='0.7';submitBtn.style.cursor='not-allowed';const rawFormData=new FormData(trialForm);const data={firstname: rawFormData.get('firstname'),lastname: rawFormData.get('lastname'),phone: rawFormData.get('phone'),email: rawFormData.get('email'),selected_class: rawFormData.get('class-select')};const scriptURL='https: if(scriptURL==='REPLACE_ME_WITH_YOUR_WEB_APP_URL'){alert('Configuration missing: Please paste your Google Web App URL in script.js(Line ~206)');submitBtn.innerHTML=originalBtnContent;submitBtn.disabled=false;submitBtn.style.opacity='1';submitBtn.style.cursor='pointer';return;}fetch(scriptURL,{method: 'POST',body: JSON.stringify(data),mode: 'no-cors'}).then(()=>{window.location.href='thankyou.html';}).catch(error=>{console.error('Error!',error.message);alert('Something went wrong submitting the form. Please try again or contact us directly at info@axcentdance.com.');submitBtn.innerHTML=originalBtnContent;submitBtn.disabled=false;submitBtn.style.opacity='1';submitBtn.style.cursor='pointer';});});}else{console.error('Trial form not found in DOM');}const contactForm=document.getElementById('contactForm');if(contactForm){console.log('Contact form found,attaching listener');contactForm.addEventListener('submit',e=>{e.preventDefault();const submitBtn=document.getElementById('submitContactBtn');const originalBtnContent=submitBtn.innerHTML;submitBtn.innerHTML='<span>Sending...</span>';submitBtn.disabled=true;submitBtn.style.opacity='0.7';submitBtn.style.cursor='not-allowed';const rawFormData=new FormData(contactForm);const data={name: rawFormData.get('name'),email: rawFormData.get('email'),phone: rawFormData.get('phone'),message: rawFormData.get('message')};const googleScriptURL='https: const formSubmitEmail='slamitza@gmail.com';const formSubmitURL=`https: const formSubmitData={_subject: `New Contact from ${data.name}`,_template: 'table',_captcha: 'false',name: data.name,email: data.email,phone: data.phone,message: data.message};const p1=fetch(googleScriptURL,{method: 'POST',body: JSON.stringify(data),mode: 'no-cors'});const p2=fetch(formSubmitURL,{method: 'POST',headers:{'Content-Type': 'application/json','Accept': 'application/json'},body: JSON.stringify(formSubmitData)});Promise.allSettled([p1,p2]).then((results)=>{window.location.href='thankyou-contact.html';}).catch(error=>{console.error('Error!',error.message);alert('Something went wrong sending your message. Please try again later.');submitBtn.innerHTML=originalBtnContent;submitBtn.disabled=false;submitBtn.style.opacity='1';submitBtn.style.cursor='pointer';});});}if(HTMLScriptElement.supports && HTMLScriptElement.supports('speculationrules')){console.log('Browser supports Speculation Rules. Enabling Prerendering.');const specScript=document.createElement('script');specScript.type='speculationrules';const specRules={prerender: [{source: "document",where:{and: [{href_matches: "/*"},{not:{href_matches: "*#*"}}]},eagerness: "moderate"}]};specScript.textContent=JSON.stringify(specRules);document.body.appendChild(specScript);}else{console.log('Browser does not support Speculation Rules. Using Link Prefetch fallback.');const prefetchLink=(url)=>{if(!url || url.includes('#')|| url.startsWith('mailto:')|| url.startsWith('tel:'))return;if(document.head.querySelector(`link[href="${url}"]`))return;const link=document.createElement('link');link.rel='prefetch';link.href=url;document.head.appendChild(link);};const links=document.querySelectorAll('a');links.forEach(link=>{link.addEventListener('mouseenter',()=>{const href=link.getAttribute('href');if(href)prefetchLink(href);});});}const timeline=document.querySelector('.timeline');const scanner=document.querySelector('.timeline-scanner');if(timeline && scanner){const updateScannerOpacity=()=>{const rect=timeline.getBoundingClientRect();const viewportHeight=window.innerHeight;const center=viewportHeight/2;const fadeRange=150;const distTop=center-rect.top;const distBottom=rect.bottom-center;let opacity=1;if(distTop < 0){opacity=0;}else if(distTop < fadeRange){opacity=distTop/fadeRange;}else if(distBottom < 0){opacity=0;}else if(distBottom < fadeRange){opacity=distBottom/fadeRange;}scanner.style.opacity=Math.max(0,Math.min(1,opacity));};window.addEventListener('scroll',()=>{requestAnimationFrame(updateScannerOpacity);});window.addEventListener('resize',updateScannerOpacity);updateScannerOpacity();}});